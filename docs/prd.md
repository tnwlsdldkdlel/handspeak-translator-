# 📄 HandSpeak Translator: 제품 요구사항 정의서 (Product Requirement Document - PRD)

**프로젝트명:** HandSpeak Translator
**버전:** v1.0 (Initial Demo)
**작성일:** 2025년 10월 8일 (가정)

---

## 1) 프로젝트 개요 (Project Overview)

| 항목 | 내용 |
| :--- | :--- |
| **프로젝트 목표** | 웹캠을 통해 특정 한국 수어(KSL) 제스처(숫자 1~5)를 인식하고, 이를 실시간으로 한국어 텍스트로 변환하는 데모 웹 애플리케이션을 구축합니다. |
| **타깃** | 프론트엔드/AI 토이 프로젝트 및 포트폴리오용 기술 데모. |
| **초기 범위** | 한국 수어 숫자 1, 2, 3, 4, 5 인식 및 텍스트 변환. |
| **제외 범위** | 모바일/태블릿 지원, 사용자 인증, 서버 측 데이터 저장. |

---

## 2) 문제 정의 (Problem Statement)

* **해결할 과제:** 브라우저 기반의 실시간 제스처 인식 ML 애플리케이션 구축의 복잡성을 관리하고, 개발 포트폴리오에 활용 가능한 명확한 기술적 성과물을 만듭니다.
* **기회:** MediaPipe와 TensorFlow.js 같은 클라이언트 측 AI 기술을 활용하여, 낮은 레이턴시로 수어 변환이라는 실제적이고 흥미로운 AI 데모를 구현할 수 있습니다.

---

## 3) 목표 및 범위 정의 (Goals and Scope Definition)

### 3.1) 측정 가능한 목표 (High-Level Goals)

| ID | 목표 내용 | 기준 |
| :--- | :--- | :--- |
| **G1 (기술)** | React 환경에 MediaPipe 손 랜드마크 추출 및 TensorFlow.js 모델 통합 성공. | 통합 및 기능 테스트 완료. |
| **G2 (성능)** | 비디오 스트림 및 추론 과정의 **실시간 반응성** 달성. | 최소 **20 FPS** 유지. |
| **G3 (정확도)** | 초기 정의된 제스처 범위(KSL 1~5)에 대한 안정적인 인식 정확도 확보. | $\ge 90\%$의 안정적인 예측률 달성. |

### 3.2) 초기 범위 (v1.0 Inclusion)

| 항목 | 상세 내용 |
| :--- | :--- |
| **인식 범위** | 한국 수어 (KSL) 숫자 1, 2, 3, 4, 5. |
| **변환 텍스트** | "일", "이", "삼", "사", "오" |
| **핵심 기능** | 실시간 인식, 텍스트 출력, 결과 관리 (Undo, Reset, Copy). |
| **플랫폼** | PC 데스크톱 웹 브라우저 전용 (Chrome, Firefox 최신 버전). |

---

## 4) 사용자 시나리오 (User Story and Flow)

### 4.1) 핵심 사용자 시나리오: "숫자 시퀀스 입력 중 한 번의 오인식을 수정하는 경험"

| 단계 | 사용자 행동 | 시스템 응답 | 핵심 기능 |
| :--- | :--- | :--- | :--- |
| 1. 접속 | 웹 데모 접속 후 카메라 접근 권한 허용. | 웹캠 활성화 및 UI 초기화. | F-01.1 (웹캠 활성화) |
| 2. 입력 (정상) | 수어 '1' (일)을 표현. | 안정화 로직 후 텍스트 영역에 **"일"** 추가. | F-03 (안정화/출력) |
| 3. 입력 (연속) | 수어 '2' (이), '3' (삼)을 표현. | **"일 이 삼"** 으로 텍스트 업데이트. | F-03 (연속 인식) |
| 4. 오인식 | 수어 '4' (사)를 표현했으나 '5' (오)로 잘못 인식됨. | 텍스트 영역에 **"일 이 삼 오"** 추가. | F-03.1 (임계값) |
| 5. 수정 | **'Undo'** 버튼 클릭. | 가장 마지막 단어인 "오"가 제거됨 (**"일 이 삼"**). | F-04.1 (Undo) |
| 6. 재입력 | 정확한 수어 '4' (사)를 다시 표현. | **"일 이 삼 사"** 로 텍스트 업데이트. | G-03 (정확도) |
| 7. 완성 | **'Copy'** 버튼 클릭. | 전체 텍스트 "일 이 삼 사"를 클립보드에 저장. | F-04.3 (Copy) |

---

## 5) 상세 기능 명세 (Detailed Feature Specification)

| ID | 기능명 | 설명 | 구현 목표 |
| :--- | :--- | :--- | :--- |
| **F-01.3** | 손 랜드마크 추출 | MediaPipe Hand Landmark를 사용해 실시간으로 21개 손 랜드마크 좌표 추출. | 좌표는 0~1 사이 값으로 정규화되어 ML 모델에 입력되어야 함. |
| **F-02.2** | 실시간 추론 | 정규화된 랜드마크 데이터를 클라이언트 측 TF.js MLP 모델에 입력. | 추론 지연 시간 $\le 30 \text{ms}$ 달성. |
| **F-03.2** | 안정화 (디바운싱) | 인식된 제스처는 특정 신뢰도 임계값(예: $\ge 0.7$)을 넘기고 **500~800ms** 동안 연속적으로 예측될 때만 최종 확정하여 텍스트로 출력. | 오인식으로 인한 텍스트 깜빡임 방지. |
| **F-04.1** | Undo 기능 | 출력된 텍스트 중 **가장 마지막에 확정된 단어**만 제거. | `RecognizedToken[]` 배열의 마지막 요소 제거로 구현. |
| **F-04.2** | Reset 기능 | 출력된 모든 텍스트 제거 및 인식 상태 초기화. | 텍스트 영역 비우기. |

---

## 6) 화면 구조/와이어프레임 설명 (Screen Structure / Wireframe)

### 6.1) 레이아웃 및 구성

| 영역 | 내용 | 비율 (PC) | 역할 |
| :--- | :--- | :--- | :--- |
| **A. 웹캠 뷰** | 라이브 비디오 스트림 표시 영역. (랜드마크 시각화 오버레이 선택적 표시). | **60% - 65%** (가장 중요한 영역) | 사용자 입력 및 피드백 집중 영역. |
| **B. 결과 패널** | 인식 결과 텍스트 출력 영역 및 제어 버튼 그룹. | **35% - 40%** | 번역 결과 확인 및 관리 영역. |

### 6.2) UX/UI 특징

* **텍스트 출력:** 인식된 단어는 공백으로 구분되어 순차적으로 추가되며, 세로 스크롤을 지원해야 합니다.
* **버튼 배치:** 'Undo', 'Reset', 'Copy' 버튼은 결과 패널(B 영역)의 하단에 **고정(Fixed Footer)** 배치하여 접근성을 높입니다.

---

## 7) 기술 스펙 & 아키텍처 (Technical Specs & Architecture)

| 카테고리 | 기술 스택 | 목적 |
| :--- | :--- | :--- |
| **Frontend** | React + TypeScript + Vite | 타입 안전성과 효율적인 개발 환경 구축. |
| **ML Inference** | TensorFlow.js | 클라이언트 측 모델 추론 엔진. |
| **Pre-processing** | MediaPipe Hand Landmarks | 높은 정확도의 손 랜드마크 좌표 추출. |
| **Model** | Custom MLP Model | KSL 숫자 5개 분류를 위한 소규모, 최적화된 모델. |
| **Optional Backend**| Node.js + Express + Mongo/Postgres | 향후 확장성(로그/데이터 수집)을 위한 고려 사항. |

### 아키텍처 흐름

`웹캠 스트림` $\rightarrow$ `MediaPipe 랜드마크 추출` $\rightarrow$ `정규화된 21개 좌표` $\rightarrow$ `TF.js MLP 모델` $\rightarrow$ `예측 확률` $\rightarrow$ `안정화 로직 (Debouncing)` $\rightarrow$ `확정된 텍스트` $\rightarrow$ `React 상태 관리` $\rightarrow$ `UI 렌더링`

---

## 8) 데이터 구조 (Data Structure)

### 8.1) 인식 결과 저장 구조 (`recognizedSequence: RecognizedToken[]`)

| 필드 | 타입 (TS) | 용도 |
| :--- | :--- | :--- |
| `id` | `number` | 토큰 고유 식별자 |
| `gestureId` | `GestureId` | ML 모델이 반환한 원시 제스처 ID (예: 'KSL_1') |
| `text` | `string` | 최종 출력될 한국어 텍스트 (예: '일') |
| `confidence` | `number` | 확정 시 모델 신뢰도 (0.0 ~ 1.0) |

### 8.2) KSL 매핑 구조 (Type-Safe KSL Mapping)

* **타입:** `type GestureId = 'KSL_1' | 'KSL_2' | 'KSL_3' | 'KSL_4' | 'KSL_5';`
* **매핑:** `const KSL_MAPPING: Record<GestureId, string>` 형태로 모델 ID를 한국어 텍스트로 변환.

---

## 9) 성능/품질 기준 (Performance / Quality Criteria)

| 분류 | 요구사항 | 목표 기준 |
| :--- | :--- | :--- |
| **속도 (로딩)** | 초기 페이지 및 모델 로딩 시간 | $\le 2.0 \text{초}$ |
| **속도 (추론)** | 단일 프레임 ML 추론 지연 시간 | $\le 30 \text{ms}$ |
| **속도 (안정화)**| 제스처 시작부터 텍스트 확정까지의 시간 | $500 \text{ms} \sim 800 \text{ms}$ |
| **품질 (FPS)** | 비디오 처리 파이프라인 프레임 속도 | $\ge 20 \text{ FPS}$ |
| **품질 (정확도)**| KSL 1~5 인식 정확도 (표준 환경) | $\ge 90\%$ |
| **비기능** | 개인정보 보호 | 웹캠 데이터는 브라우저 내에서만 처리 및 소멸 (저장/전송 불가). |

---

## 10) 리스크 및 대응 전략 (Risks and Mitigation Strategy)

| ID | 리스크 설명 | 대응 전략 |
| :--- | :--- | :--- |
| **R-01** | **KSL 데이터 부족:** 학습 데이터 부족으로 모델 일반화 및 정확도 저하 발생. | 직접 촬영한 소규모 KSL 제스처 데이터에 대해 데이터 증강(각도·조명 변형)과 랜드마크 기반 합성 증강을 적용하여 최소한의 학습량을 확보. |
| **R-02** | **실시간 불안정성:** 조명, 거리, 각도 변화에 따른 실시간 인식 안정성 저하. | 처리 파이프라인에 **신뢰도 임계값 + N-프레임 연속 검증(Temporal Smoothing)**을 적용하여 환경 변화에도 안정적으로 제스처가 확정되도록 함. |
| **R-03** | **브라우저 성능 제약:** 저사양 PC에서 성능 목표(20FPS, 30ms) 미달 가능성. | 모델 크기 최적화(양자화) 및 성능 최적화된 `requestAnimationFrame` 루프 제어를 적용. |

---

## 11) 향후 확장 플랜 (Future Expansion Plan)

| ID | 확장 항목 | 설명 |
| :--- | :--- | :--- |
| **P-01** | **제스처 범위 확장** | 기본 인사말, 필수 동사 등 기본 대화 단어를 인식 범위에 추가. |
| **P-02** | **고급 인식** | 랜드마크 시퀀스를 고려하는 순환 모델(RNN/LSTM)을 도입하여 연속 수어 인식 기능 구현. |
| **P-03** | **관리자 로깅 페이지** | Node.js 백엔드를 활용하여 인식 로그(확정 시간, 신뢰도)를 모니터링하는 간단한 관리 페이지 구축. |
| **P-04** | **사용자 정의 제스처** | 사용자가 직접 새로운 제스처를 등록하고 클라이언트 측에서 간단하게 재학습(Transfer Learning)하는 기능 제공. |